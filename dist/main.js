!function(e){var t={};function a(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,a),r.l=!0,r.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=0)}([function(e,t,a){"use strict";a.r(t);const n=async e=>{const t=e.data.length/4;for(let a=0;a<t;a++){const t=4*a,n=(e.data[t]+e.data[t+1]+e.data[t+2])/3;e.data[t]=n,e.data[t+1]=n,e.data[t+2]=n}return e};n.toString=()=>"[JS] Greyscale";const r=async e=>{const{width:t,data:a}=e,n=4*t,r=a.length-4*t;for(let o=n;o<r;o+=4){let n=0,r=0,i=0;n=a[o]+a[o-4]+a[o+4]+a[o-4*t]+a[o-4*t-4]+a[o-4*t+4]+a[o+4*t-4]+a[o+4*t]+a[o+4*t+4],r=a[o+1]+a[o-3]+a[o+5]+a[o-4*t+1]+a[o-4*t-3]+a[o-4*t+5]+a[o+4*t-3]+a[o+4*t+1]+a[o+4*t+5],i=a[o+2]+a[o-2]+a[o+6]+a[o-4*t+2]+a[o-4*t-2]+a[o-4*t+6]+a[o+4*t-2]+a[o+4*t+2]+a[o+4*t+6],n/=9,r/=9,i/=9,e.data[o]=n,e.data[o+1]=r,e.data[o+2]=i}return e};r.toString=()=>"[JS] Mean filter";const o={};var i=async(e,t)=>{if(e in o)return o[e];const a=await fetch(e),n=await a.arrayBuffer();return o[e]=await WebAssembly.instantiate(n,t),o[e]};let c=new WebAssembly.Memory({initial:75});const s=async e=>{const{data:t}=e,a=new Uint32Array(c.buffer);a.set(t);const n={js:{memory:c}},{instance:r}=await i("./dist/greyscale.wasm",n);return r.exports.effect(0,t.length),new ImageData(new Uint8ClampedArray(a),e.width,e.height)};s.toString=()=>"[WAT] Greyscale";var l=s;let d=new WebAssembly.Memory({initial:75});const u=async e=>{const{data:t}=e,a=new Uint32Array(d.buffer);a.set(t);const n={js:{memory:d}},{instance:r}=await i("./dist/meanFilter.wasm",n);return r.exports.effect(0,t.length,e.width),new ImageData(new Uint8ClampedArray(a),e.width,e.height)};u.toString=()=>"[WAT] Mean filter";var m={greyscale:l,meanFilter:u};const f={width:640,height:480},y=(e,t,a=t.toString())=>{const n=document.createElement("canvas");Object.entries(f).map(([e,t])=>n[e]=t);const r=document.createElement("div");r.className="display",r.appendChild(document.createTextNode(a)),r.appendChild(n);const o=document.createElement("time");r.appendChild(o),document.querySelector("#displays").appendChild(r),((e,t,a,n)=>{const r=t.getContext("2d"),o={timerCallback:()=>{o.process(),setTimeout(()=>o.timerCallback(),1e3/60)},process:async()=>{r.drawImage(e,0,0,640,480);const t=r.getImageData(0,0,e.width,e.height),o=performance.now(),i=await a(t),c=performance.now()-o;n(c),r.putImageData(i,0,0)}};o.timerCallback()})(e,n,t,e=>{o.textContent=`${1e3/e} FPS`})};window.onload=()=>{(async()=>{const e=document.querySelector("video");await(async e=>{if(!navigator.mediaDevices.getUserMedia)throw new Error("No camera available");e.srcObject=await navigator.mediaDevices.getUserMedia({video:!0})})(e),y(e,m.greyscale)})()}}]);